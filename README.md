# Beijing-Bus-Route-Planning

## 基本说明
北京科技大学《人工智能与机器学习》大作业：基于北京公交数据的公交换乘规划系统。
本程序由github用户"tes223"设计并编写，其中站点信息获取时的逻辑参考了github用户"CakeAL"的代码（已获得本人同意），其余代码均为本人编写。

本程序的逻辑原理非常简单，前端使用gradio，后端使用flask，通过api进行通信。

请勿将本程序直接当做作业上交，要交作业的话，你至少应该把前端部分的版权声明删了。但凡你会一点python的话，只要稍微看懂一点本项目的代码逻辑，删掉这部分版权声明非常简单。

## 使用方法
### 对于有一定python基础的用户
完成以下五个步骤需要15-20分钟。
1. 下载源代码。
2. 在工作区根目录 pip install -r requirements.txt，当然如果你喜欢的话，也可以自己创建一个虚拟环境之后再运行。
3. 进入get_data文件夹，在联网状态下依次运行get_bus_lines.py、get_stops.py、csv_access.py、code_converter.py，以爬取数据。前两个python文件运行中有进度提示，csv_access.py没有进度提示，运行时间较长，请耐心等待运行完成。code_converter.py用于csv文件的转码及删除空行处理，最后导出的csv文件位于data文件夹中。
4. 在工作区根目录 python main.py
5. 如果运行无误的话，将会弹出浏览器前端，然后即可在浏览器中使用。（目前已知问题：如果这一步报错，请把data文件夹中bus_stops.csv第一行里面的1.1手动改成1，然后尝试运行）

### 对于想开箱即用的同学
1. 从本页面的右侧下载最新release包，此release包已经包含了软件运行需要的所有环境和数据。
2. 双击run.bat，控制台将会启动。
3. 如果运行无误的话，将会弹出浏览器前端，然后即可在浏览器中使用。

### 使用过程中的注意事项
- 如果你点击确定后好长时间窗口没有任何反应（甚至没有加载中页面），那多半是站名输的有问题，请前往站名搜索标签，搜索正确的站名，再查找路线。
- 本程序认为所有车站的站间距都是一样的，所以这里给出的最短路径并不是实际乘车的最短路径。再加上北京公交快车大站距的实际情况，使用本软件进行乘车规划会导致绕路！再加上北京公交官网数据更新不及时的实际情况，请勿将本程序应用于实际乘车！乘车规划路线请使用一路同行APP或者高德百度等靠谱的地图软件！
- 如果前端莫名其妙连不上后端，请检查是不是挂了梯子，如果是的话，把梯子关掉。

## 联系作者
contact me at xingjuustb@foxmail.com

